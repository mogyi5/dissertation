{% extends 'myhealthdb/second_base.html' %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block extrahead %} 
{{ form.media }} 
{% endblock %}

{% block body_block %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li class="{{ message.tags }}">{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
<h4>Personal details:</h4>
<form action="" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{form|crispy}}

    {% comment %} <div class="form-row">
        <div class="form-group col-md-6 mb-0">
            {{ form.first_name|as_crispy_field }}
        </div>
        <div class="form-group col-md-6 mb-0">
            {{ form.last_name|as_crispy_field }}
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6 mb-0">
            {{ form.sex|as_crispy_field }}
        </div>
        <div class="form-group col-md-6 mb-0">
            {{ form.dob|as_crispy_field }}
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6 mb-0">
            {{ form.tel_no|as_crispy_field }}
        </div>
        <div class="form-group col-md-6 mb-0">
            {{ form.nhs_no|as_crispy_field }}
        </div>
    </div>
    <h6>Address:</h6>
    <div class="form-row">
        <div class="form-group col-md-6 mb-0">
            {{ form.ad_line1|as_crispy_field }}
        </div>
        <div class="form-group col-md-6 mb-0">
            {{ form.ad_line2|as_crispy_field }}
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6 mb-0">
            {{ form.ad_city|as_crispy_field }}
        </div>
        <div class="form-group col-md-6 mb-0">
            {{ form.ad_postcode|as_crispy_field }}
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-12 mb-0">
            {{ form.ad_country|as_crispy_field }}
        </div>
    </div> {% endcomment %}

    <hr />
    <h4>Doctors:</h4>
    <div id="pdform_set">
        {{ pdformset.management_form }}
        {% for f in pdformset %}
        <div>
        {{ f|crispy}}
        </div>
        {% comment %} <div>
            <div class="form-row">
                <div class="form-group col-md-6 mb-0">
                    {{ f.doctor|as_crispy_field }}
                </div>
                <div class="form-group col-md-6 mb-0">
                    {{ f.note|as_crispy_field }}
                </div>
                {{ f.primary|as_crispy_field }}
            </div>
        </div> {% endcomment %}
        {%endfor%}

        {% if pdformset.non_form_errors %}
        {% for error in pdformset.non_form_errors %}
        {{ error|escape }}
        {% endfor %}
        {% endif %}
    </div>
    <hr />
    <h4>Emergency contacts:</h4>
    <div id="ecform_set">
        {{ ecformset.management_form }}
<div>
        {% for f2 in ecformset %}
        {{f2|crispy}}
        </div>
        {% comment %} <div class="form-row">
            <div class="form-group col-md-12 mb-0">
                {{ f2.name|as_crispy_field }}
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-12 mb-0">
                {{ f2.email|as_crispy_field }}
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6 mb-0">
                {{ f2.phone1|as_crispy_field }}
            </div>
            <div class="form-group col-md-6 mb-0">
                {{ f2.phone2|as_crispy_field }}
            </div>
        </div> {% endcomment %}

        {%endfor%}
        <hr/>

        {% if ecformset.non_form_errors %}
        {% for error in ecformset.non_form_errors %}
        {{ error|escape }}
        {% endfor %}
        {% endif %}
    </div>

    <button style="color:black;" class="btn btn-primary" type="submit" name="submit">Submit!</button>

</form>

{% endblock %}